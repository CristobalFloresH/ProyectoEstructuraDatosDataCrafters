void liberarPersona(struct persona *persona) {
    if (persona == NULL)
        return;

    free(persona->nombre);
    free(persona->apellido);
    free(persona->rut);
    free(persona->ocupacion);
    free(persona->contrasena);

    free(persona);
};

void liberarDenuncia(struct denuncia *denuncia) {
    if (denuncia == NULL)
        return;

    free(denuncia->fecha);
    free(denuncia->descripcion);
    free(denuncia->ruc);
    free(denuncia->tipoDeDenuncia);

    free(denuncia);
};

void liberarDatosImputados(struct datosImputados *datos) {
    if (datos == NULL)
        return;

    free(datos->declaracion);
    free(datos->fechaInicioMedida);
    free(datos->fechaFinMedida);

    free(datos);
};

void liberarInvolucrados(struct involucrados **involucrados, int tam) {
    if (involucrados == NULL)
        return;

    for (int i = 0; i < tam; i++) {
        if (involucrados[i] != NULL) {
            if (involucrados[i]->datosImputados != NULL) {
                liberarDatosImputados(involucrados[i]->datosImputados);
                involucrados[i]->datosImputados = NULL;
            }
            // No liberamos persona, asumiendo que es compartida
            free(involucrados[i]);
            involucrados[i] = NULL;
        }
    }

    free(involucrados);
}

void liberarDatosDiligencias(struct datosDiligencias *degligencias) {
    if (degligencias == NULL)
        return;

    free(degligencias->fechaInicio);
    free(degligencias->fechaFin);
    free(degligencias->descripcion);
    free(degligencias->estado);
    free(degligencias->tipoDiligencia);

    free(degligencias);
};

void liberarDatosCarpeta(struct datosCarpeta *datosCarpeta) {
    if (datosCarpeta == NULL)
        return;

    free(datosCarpeta->fecha);
    free(datosCarpeta->descripcion);

    if (datosCarpeta->datosDiligencias != NULL) {
        liberarDatosDiligencias(datosCarpeta->datosDiligencias);
    }

    if (datosCarpeta->datosDenuncia != NULL) {
        liberarDenuncia(datosCarpeta->datosDenuncia);
    }

    free(datosCarpeta);
};

void liberarCausa(struct causa *causa) {
    if (causa == NULL)
        return;

    free(causa->ruc);
    free(causa->sentencia);

    if (causa->denuncia != NULL) {
        liberarDenuncia(causa->denuncia);
        causa->denuncia = NULL;
    }

    struct nodoDatosCarpetas *actual = causa->datosCarpetas;
    while (actual != NULL) {
        struct nodoDatosCarpetas *sig = actual->siguiente;
        if (actual->datosCarpeta != NULL) {
            liberarDatosCarpeta(actual->datosCarpeta);
            actual->datosCarpeta = NULL;
        }
        free(actual);
        actual = sig;
    }
    causa->datosCarpetas = NULL;

    liberarInvolucrados(causa->involucrados, causa->tamInvolucrados);
    causa->involucrados = NULL;

    free(causa);
}

