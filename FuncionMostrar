struct persona *buscarPersonaPorRut(struct nodoPersonas *personas, char *rutBuscado) {
    if (personas == NULL || rutBuscado == NULL) return NULL;

    struct nodoPersonas *actual = personas;

    do {
        if (strcmp(actual->datosPersona->rut, rutBuscado) == 0)
        {
            return actual->datosPersona;
        }

        actual = actual->siguiente;
    } while (actual != personas);

    return NULL;
}

void mostrarUsuarioPorRut(struct nodoPersonas *personas, char *rutBuscado) {
    //se busca a la persona indicada
    struct persona *personaBuscada = buscarPersonaPorRut(personas, rutBuscado);

    //si no se encuentra o algun dato es invalido, retorna mensaje de error
    if (personaBuscada == NULL)
    {
        printf("Se genero un error al buscar el usuario o este no existe\n");
        return;
    }

    //si se encuentra y no es null (paso el if anterior), muestra los datos de la persona
    
    printf("Nombre: %s\n", personaBuscada->nombre);
    printf("Apellido: %s\n", personaBuscada->apellido);
    printf("Rut: %s\n", personaBuscada->rut);
    printf("Ocupación: %s\n", personaBuscada->ocupacion);
}


void mostrarDenunciaPorRut(struct nodoPersonas *personas, char *rutBuscado) {
    //se busca a la persona indicada
    struct persona *personaBuscada = buscarPersonaPorRut(personas, rutBuscado);

    //si no se encuentra o algun dato es invalido, retorna mensaje de error
    if (personaBuscada == NULL)
    {
        printf("Se genero un error al buscar el usuario o este no existe\n");
        return;
    }
    struct nodoDenuncias *actual = personaBuscada->denuncias;
    int contadorDenuncias = 0;

    printf("Denuncias de %s\n, rut: %s\n", personaBuscada->nombre, personaBuscada->rut);

    while (actual != NULL)
    {
        if (actual->datosDenuncia != NULL)
        {
            contadorDenuncias++;
            printf("Denuncia %d\n", contadorDenuncias);
            printf("Ruc: %s\n", actual->datosDenuncia->ruc);
            printf("Fecha: %s\n", actual->datosDenuncia->fecha);
            printf("Descripción: %s\n", actual->datosDenuncia->descripcion);
            printf("Tipo de denuncia: %s\n", actual->datosDenuncia->tipoDeDenuncia);

            if (strcmp(actual->datosDenuncia->denunciante->rut, personaBuscada->rut) == 0) {
                printf("Denuncia Enviada a %s %s\n", actual->datosDenuncia->denunciado->nombre,
                    actual->datosDenuncia->denunciado->apellido);
            }

            if (strcmp(actual->datosDenuncia->denunciado->rut, personaBuscada->rut) == 0) {
                printf("Denuncia Recibida por %s %s\n", actual->datosDenuncia->denunciante->nombre,
                    actual->datosDenuncia->denunciante->apellido);
            }
        }
        actual = actual->siguiente;
    }
    if (contadorDenuncias == 0)
    {
        printf("Usuario no tiene denuncias\n");
    }
}
