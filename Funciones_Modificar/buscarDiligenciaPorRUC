struct datosDiligencias* buscarDiligenciaPorFechaYTipo(struct ministerio *ministerio, const char *ruc, const char *fechaFin, const char *tipoDiligencia) {
    if (ministerio == NULL || ruc == NULL || fechaFin == NULL || tipoDiligencia == NULL) {
        printf("Parámetros inválidos.\n");
        return NULL;
    }

    // Buscar causa por RUC
    struct causa *c = buscarCausaConRUC(ministerio, ruc);
    if (c == NULL) {
        printf("No se encontró la causa con RUC: %s\n", ruc);
        return NULL;
    }

    // Acceder a la carpeta única de la causa
    if (c->datosCarpetas == NULL || c->datosCarpetas->datosCarpeta == NULL) {
        printf("La causa no tiene carpeta válida.\n");
        return NULL;
    }

    struct datosCarpeta *carpeta = c->datosCarpetas->datosCarpeta;

    // Verificar si es tipo diligencia
    if (carpeta->tipoDeDato == 3 && carpeta->datosDiligencias != NULL) {
        struct datosDiligencias *d = carpeta->datosDiligencias;
        if (strcmp(d->fechaFin, fechaFin) == 0 && strcmp(d->tipoDiligencia, tipoDiligencia) == 0) {
            return d;
        }
    }

    printf("No se encontró una diligencia que coincida con fecha de término '%s' y tipo '%s'.\n", fechaFin, tipoDiligencia);
    return NULL;
}

